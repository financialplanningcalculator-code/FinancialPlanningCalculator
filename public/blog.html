<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blog List</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; }
header, footer { background:#003366; color:white; padding:15px; text-align:center; }
.container { max-width:900px; margin:20px auto; padding:0 15px; }
h1 { margin-bottom:20px; }
a.blog-link { display:block; margin:8px 0; color:#003366; font-weight:bold; text-decoration:none; }
a.blog-link:hover { color:#0066cc; }
</style>
</head>
<body>

<header>
    <h1>My Blogs</h1>
</header>

<div class="container">
    <h2>All Blog Posts</h2>
    <div id="blog-list">Loading blogs...</div>
</div>

<footer>
    &copy; 2025 Your Website
</footer>

<script>
const BLOG_FOLDER = "/blogs/";
const MAX_BLOGS = 99; // adjust if needed

// Fetch first line (# Title) from Markdown file
async function getTitle(filename){
    try {
        const res = await fetch(BLOG_FOLDER + filename);
        if(!res.ok) return filename.replace(".md","");
        const text = await res.text();
        const match = text.match(/^# (.+)$/m);
        return match ? match[1] : filename.replace(".md","");
    } catch(e) {
        return filename.replace(".md","");
    }
}

async function loadBlogList(){
    const listDiv = document.getElementById("blog-list");
    listDiv.innerHTML = "";

    for(let i=1; i<=MAX_BLOGS; i++){
        const filename = `blog_${String(i).padStart(2,'0')}.md`;
        const url = BLOG_FOLDER + filename;
        try{
            const res = await fetch(url,{ method:'HEAD' });
            if(res.ok){
                const title = await getTitle(filename);
                const a = document.createElement("a");
                a.href = "blogdetails.html?post=" + encodeURIComponent(filename);
                a.textContent = title;
                a.className = "blog-link";
                listDiv.appendChild(a);
            }
        }catch(e){}
    }

    if(listDiv.children.length === 0){
        listDiv.innerHTML = "<p>No blogs found.</p>";
    }
}

loadBlogList();
</script>

</body>
</html>
